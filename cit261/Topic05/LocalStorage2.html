<!DOCTYPE html>
<html lang="en-US">
<head>
	<meta charset="utf-8">
	<meta name="author" content="Michael Short">
	<meta name="description" content="Local Storage API Example 1">
	<title>CIT 261 - Local Storage API, Storing and Retrieving Simple Data, Arrays, Associative Arrays, and Objects</title>
</head>
<body>
	<h1>Local Storage API Example 2 - Retrieving Data</h1>
	<main id="main">
	
	</main>
</body>
<script>
	var output = "";
	output += "localStorage supported: [" + localStorageSupported() + "]<br><br>";
	
	// Only Attempt if localStorage API is supported
	if (localStorageSupported()) {

		// Lets get the data out.		
		output += "Retrieving Data: <br><br>";
		
		// Retrieve a String
		output += "   lastVisit<br>";
		var lastVisitDate = localStorage.lastVisit;
		
		// Retrieve an Array
		output += "   billingAddress<br>";
		var billingAddress = JSON.parse(localStorage.billingAddress);
		
		// Retrieve an Associative Array
		// Because an Associative Array will not store easily as an Array or Object
		// To reconstruct, each item must be separately retrieved and stored. 
		output += "   shippingAddress<br>";
		var shippingAddress = [];
		shippingAddress['street1'] = JSON.parse(localStorage.SAstreet1);
		shippingAddress['city'] = JSON.parse(localStorage.SAcity);
		shippingAddress['state'] = JSON.parse(localStorage.SAstate);
		shippingAddress['postalCode'] = JSON.parse(localStorage.SApostalCode);
		output += "   shoppingCart<br>";
		
		// Retrieve an Object
		var shoppingCart = Object(JSON.parse(localStorage.shoppingCart));
		output += "<br><br>Done!<br><br>";

		// Get sessionData
		var tmpData = sessionStorage.tmpData;
		
		// Get ssessionData using getItem
		var tmpData2 = sessionStorage.getItem('tmpData2');

		// Display what we were able to retrieve
		output += "<b>Data Read:</b><br><br>";
		
		// Display the String
		output += "lastVisitDate: " + lastVisitDate + "<br><br>";
		
		// Display the Array
		output += "billingAddress: <br><br>";
		for (var x = 0; x < billingAddress.length; x++) {
			output += "billingAddress[" + x + "]:  " + billingAddress[x] + "<br>";
		}
		output += "<br><br>";

		// Display the Associative Array
		output += "shippingAddress: <br><br>";
		for (var a in shippingAddress) {
			output += "shippingAddress[" + a + "]: " + shippingAddress[a] + "<br>";
		}
		output += "<br><br>";
		
		// Display the object
		output += "shoppingCart: <br><br>";
		for (var b in shoppingCart) {
			output += "shoppingCart " + b + ": " + shoppingCart[b] + "<br>";
		}
		output += "<br><br>";
		
		// Display tmpData
		output += "tmpData: " + tmpData + "<br><br>";

		// Display tmpData2
		output += "tmpData2: " + tmpData2 + "<br><br>";		
		
	}
	
	
function localStorageSupported() {
	var result = false;
	if (typeof(Storage) !== "undefined") {
		result = true;
	}
	return result;
}

	document.getElementById("main").innerHTML = output;
</script>
</html>
