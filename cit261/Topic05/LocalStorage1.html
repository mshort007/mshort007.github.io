<!DOCTYPE html>
<html lang="en-US">
<head>
	<meta charset="utf-8">
	<meta name="author" content="Michael Short">
	<meta name="description" content="Local Storage API Example 1">
	<title>CIT 261 - Local Storage API, Storing and Retrieving Simple Data, Arrays, Associative Arrays, and Objects</title>
</head>
<body>
	<h1>Local Storage API Example 1 - Storing Data</h1>
	<main id="main">
	
	</main>
</body>
<script>
	var output = "";
	output += "localStorage supported: [" + localStorageSupported() + "]<br><br>";
	
	// Only Attempt if localStorage API is supported
	if (localStorageSupported()) {
		// Simple Data
		var lastVisitDate = new Date().toString();
		
		// Arrays
		var billingAddress = [];
		billingAddress[0] = "Michael Short";
		billingAddress[1] = "123 Any Street"
		billingAddress[2] = "New York, NY, 10101"
		
		// Associative Arrays
		var shippingAddress = [];
		shippingAddress['street1'] = "123 Any Street";
		shippingAddress['city'] = "New York";
		shippingAddress['state'] = "NY";
		shippingAddress['postalCode'] = "10101";
		output += "shippingAddress[street1]" + shippingAddress['street1'] + "<br><br>";
		
		// Objects
		var shoppingCart = { item:"Baby Formula", size: "24 oz", qty:3 };

		// We have Data, lets Store it.		
		output += "Storing Data: <br><br>";
		
		// Storing a string
		output += "   lastVisit<br>";
		localStorage.lastVisit = lastVisitDate;
		
		// This Array can be stringified and stored
		output += "   billingAddress<br>";
		localStorage.billingAddress = JSON.stringify(billingAddress);
		
		// This Associative Array cannot be stringified and stored, each element must be stored individually
		// an attempt to stringify this array will result in an empty string
		output += "   shippingAddress<br>";
		localStorage.SAstreet1 = JSON.stringify(shippingAddress['street1']);
		localStorage.SAcity = JSON.stringify(shippingAddress['city']);
		localStorage.SAstate = JSON.stringify(shippingAddress['state']);
		localStorage.SApostalCode = JSON.stringify(shippingAddress['postalCode']);
		
		// This Object can be stringified and stored		
		output += "   shoppingCart<br>";
		localStorage.shoppingCart = JSON.stringify(shoppingCart);
		
		// This is is how we only store something temporarily for this session.
		output += "   tmpData<br>";
		sessionStorage.tmpData = "This data will only be stored for the current session!";
		
		// Store temp data using the setItem method
		output += "   tmpData2 (using setItem)<br>";
		sessionStorage.setItem("tmpData2", "This data was stored with the setItem method!");
		output += "<br><br>Done!<br>";
		
		

	}
	
	
function localStorageSupported() {
	var result = false;
	if (typeof(Storage) !== "undefined") {
		result = true;
	}
	return result;
}

	document.getElementById("main").innerHTML = output;
</script>
</html>
